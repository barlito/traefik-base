api:
  dashboard: true
  insecure: false  # Disable insecure API access on port 8080

entryPoints:
  http:
    address: :80
    http2:
      maxConcurrentStreams: 250
  https:
    address: :443
    http2:
      maxConcurrentStreams: 250
    http3:
      advertisedPort: 8443  # Announce HTTP/3 on external port 8443

certificatesResolvers:
  letsencrypt:
    acme:
      # Email set via environment variable TRAEFIK_CERTIFICATESRESOLVERS_LETSENCRYPT_ACME_EMAIL
      storage: /etc/traefik/acme.json
      httpChallenge:
        entryPoint: http

global:
  sendAnonymousUsage: false

log:
  level: INFO  # Production log level

accessLog:
  # No filePath = stdout (for Docker logging driver to Loki/Fluentd)
  format: json
  bufferingSize: 100
  filters:
    statusCodes:
      - "400-599"

providers:
  swarm:
    endpoint: unix:///var/run/docker.sock
    exposedByDefault: false
    watch: true
    network: traefik_traefik_proxy
  file:
    filename: /etc/traefik/dynamic/config.yml
    watch: true
